# senior-backend-developer-node

This project is a starting point for developing an API-first application using TypeScript, Node.js and can be used as a reference for a senior backend developer techincal assesment.

## Features

- Products CRUD
- Categories CRUD
- Hard typed data validation via `tsoa - Validation Service`
- Auto code generation - auto-generated routes via `tsoa - Routing Generation`
- Autometed Dependency injection - IOC Contianers implemented for app and tests usage (`typescript-ioc`)
- Auto-Generated Docs trought tsoa `tsoa - Open API Specs Generation` based in typescript decorators
- Swagger UI to serve autogenerated routes
- Full test cases for repositories / services / controllers
- InMemory mongo usage for mongo integration tests
- Development Environment
- Typescript configuration
- Fake fixtures enabled
- CORS Enabled
- Validation/API Error Handling
- Basic api_Key authentication for some routes/paths

## Getting started

- `npm install` to install dependencies
- `npm run dev` to run un dev environment, needs a `npm run up` call if a mongo instance isn'n running in your machine
- `npm run build` to build from source
- `npm run up` to start developer environment
- `npm run swagger` to generate openapi api reference doc
- `npm run test` to run all tests files included in tests folder

## Getting started


## Folder Structure

- Model:
  Place for mongo/application models definition.

- Application:
  con

- Controllers:
  controllers focused on returning response object for given request

- Database:
  Mongo DB native driver implementation

- Errros:
  custom errors definitons

- Handlers:
  Generally, typical web application needs to handle two kinds of errors, one is 5XX error and the other is 4XX error. So for 5XX errors, use native js `Error` and for 4XX errors, use `ValidateError`

- Infrastructure:
  Instead of directly using database driver methods, `repositories` wraps those api thus provides proper abstractions over the framework and the driver implementations

- Middlewwre:
  custom middlewares implemetations (example: Auth, Permission ...)

- Routes:
  It contains definition for each routes. For each route handlers, it must be wrapped with `buildExpressCallback` helper.
  Thus making our controller simple, dumb and not knowing which routing framework you're using.

- Services:
  It handles business logic, manage some custom errors and use `repositories` to interact with database.

## Entities

Each entry contains the following information:

| **Name**     | **Description** |
| ------------ | --------------- |
| `Products`   | ed assetName    |
| `Categories` | A h             |

<!-- ## Entities Relations

![alt text](.docs/shell.png "Developer experience") -->

## System Requirements

- [Node.js 14+](https://nodejs.org/en/download/)
- [docker](https://www.docker.com) and [docker-compose](https://docs.docker.com/compose)
- [npm](https://yarnpkg.com/en)

## Technologies Used

- [TypeScript](http://www.typescriptlang.org/)
- Backend
  - [Node.js](https://nodejs.org)
  - [Express](https://expressjs.com/)
  - [tsoa](https://github.com/lukeautry/tsoa)
  - Generates Express Routes from TypeScript controllers
  - Generates [OpenAPI ("Swagger")](https://swagger.io/docs/specification/about) specification, enabling automatic documentation and client library generation
  - [MongoDB](mongo)
  - Generates Express Routes from TypeScript controllers
  - [Redis](https://redis.io/) for caching/messaging
  - Developer environment
  - [docker](https://www.docker.com/) and [docker-compose](https://docs.docker.com/compose) for non-Node.js project dependencies
  - Single `start` script that live reloads the API, and related services
  - VSCode [launch.json](./.vscode/launch.json) settings have been included to support debugging
- Testing
  - [mocha](https://) Asynchornus testing framework
  - [chai](https://github.com/) BDD / TDD assertion
  - [sinon](https://github.com/) stubs for module mocking
  - [chai-http](https://github.com/) for API endpoint tests

## Running Tests

### Mocha / Chai

Includes Respositories / Services / Controllers Tests
```
npm run test
```
